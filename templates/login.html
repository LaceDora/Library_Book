{% extends "base.html" %}
{#
  templates/login.html

  Form đăng nhập: trường `login` chứa MSSV/MSCB, `password` chứa mật khẩu.
  Sử dụng JS toggle để hiển thị/ẩn mật khẩu.
#}
{% block content %}

<style>
.input-with-icon {
  position: relative;
}
.input-with-icon .icon {
  position: absolute;
  left: 12px;
  top: 50%;
  transform: translateY(-50%);
  color: #6c757d;
  z-index: 2;
}
.input-with-icon .password-toggle {
  position: absolute;
  right: 0;
  top: 50%;
  transform: translateY(-50%);
  padding: 0.375rem 0.75rem;
  color: #6c757d;
  background: none;
  border: none;
  cursor: pointer;
}
.input-with-icon .form-control {
  padding-left: 2.5rem;
  padding-right: 2.5rem;
}
</style>

<script>
function togglePassword(inputId, button) {
    var input = document.getElementById(inputId);
    var icon = button.querySelector('i');
    
    if (input.type === 'password') {
        input.type = 'text';
        icon.classList.remove('bi-eye-fill');
        icon.classList.add('bi-eye-slash-fill');
    } else {
        input.type = 'password';
        icon.classList.remove('bi-eye-slash-fill');
        icon.classList.add('bi-eye-fill');
    }
}
</script>

<div class="auth-page">
  <div class="auth-card">
    <div class="auth-brand d-flex align-items-center">
      <div class="logo">
        <img src="{{ url_for('static', filename='uploads/logo.jpg') }}" alt="Logo" class="auth-logo">
      </div>
      <div>
        <div class="text-primary fw-bold">Thư viện</div>
        <div class="small text-muted">Đăng nhập để mượn sách</div>
      </div>
    </div>

    <h3 class="mb-3">Đăng nhập</h3>

  <form method="POST" action="{{ url_for('auth_bp.login') }}" class="mb-3">
      <div class="mb-3 input-with-icon">
        <span class="icon"><i class="bi bi-person-circle"></i></span>
        <input type="text" name="login" id="login" class="form-control" placeholder="MSSV/MSCB" required>
      </div>

      <div class="mb-3 input-with-icon">
        <span class="icon"><i class="bi bi-lock-fill"></i></span>
        <input type="password" name="password" id="password" class="form-control" placeholder="Mật khẩu" required>
        <button type="button" class="btn btn-link password-toggle" onclick="togglePassword('password', this)" aria-label="Toggle password visibility">
          <i class="bi bi-eye-fill"></i>
        </button>
      </div>

      <button type="submit" class="btn btn-primary w-100">Đăng nhập</button>
    </form>

    <!-- OAuth logins removed for demo -->
    <div class="d-flex justify-content-between small-link">
  <a href="{{ url_for('auth_bp.register') }}">Chưa có tài khoản? Đăng ký</a>
      <a href="{{ url_for('auth_bp.forgot_password') }}" class="text-muted">Quên mật khẩu?</a>
    </div>
  </div>
</div>

 

{% endblock %}
